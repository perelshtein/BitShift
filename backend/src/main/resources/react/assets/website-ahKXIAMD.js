import{r as n,q as se,j as e,R as P,W as Z,s as Ge,B as k,a as Ce,u as he,c as ye,m as Se,e as as,o as Ae,b as Le,k as rs,g as cs,n as Ue,P as oe,i as Me,f as We}from"./index-CLB7HOer.js";import{W as ze}from"./admin-BKWs-ueP.js";const ls="_website_147g5_1",ds="_websiteContainer_147g5_6",os="_menu_147g5_49",hs="_contactsTelegram_147g5_54",us="_contactsEmail_147g5_58",xs="_contactLinks_147g5_70",js="_contactPage_147g5_78",ms="_login_147g5_86",vs="_logout_147g5_87",fs="_user_147g5_112",gs="_logo_147g5_87",ps="_save_147g5_151",ws="_obmenButton_147g5_151",_s="_sendButton_147g5_151",bs="_containerFirstLine_147g5_181",ys="_container_147g5_181",Ns="_dataBar_147g5_206",Cs="_obmenBar_147g5_207",Ss="_reviews_147g5_209",Rs="_rulesBold_147g5_265",Is="_currencyAmount_147g5_297",Ts="_wallet_147g5_313",Fs="_field_147g5_319",Ps="_alignRight_147g5_344",Bs="_twoCol_147g5_350",Gs="_twoColOptions_147g5_379",Ls="_twoColReviews_147g5_386",Os="_threeCol_147g5_395",Ds="_changeDirections_147g5_402",$s="_modal_147g5_425",Es="_spinner_147g5_438",ks="_s2_147g5_1",As="_warning_147g5_449",Us="_warningBlock_147g5_454",Ms="_saveButton_147g5_467",Ws="_horzList_147g5_484",zs="_tableTwoCol_147g5_494",Vs="_tableFiveCol_147g5_499",Ys="_tableFourCol_147g5_503",Hs="_decoratedHeader_147g5_563",qs="_countdown_147g5_586",Ks="_pagination_147g5_590",Js="_pageLink_147g5_599",Qs="_arrow_147g5_605",Xs="_forward_147g5_611",Zs="_back_147g5_616",et="_disabled_147g5_621",st="_detailLink_147g5_627",tt="_nested_147g5_632",nt="_show_147g5_635",it="_hide_147g5_646",s={website:ls,websiteContainer:ds,menu:os,contactsTelegram:hs,contactsEmail:us,contactLinks:xs,contactPage:js,login:ms,logout:vs,user:fs,logo:gs,save:ps,obmenButton:ws,sendButton:_s,containerFirstLine:bs,container:ys,dataBar:Ns,obmenBar:Cs,reviews:Ss,rulesBold:Rs,currencyAmount:Is,wallet:Ts,field:Fs,alignRight:Ps,twoCol:Bs,twoColOptions:Gs,twoColReviews:Ls,threeCol:Os,changeDirections:Ds,modal:$s,spinner:Es,s2:ks,warning:As,warningBlock:Us,saveButton:Ms,horzList:Ws,tableTwoCol:zs,tableFiveCol:Vs,tableFourCol:Ys,decoratedHeader:Hs,countdown:qs,pagination:Ks,pageLink:Js,arrow:Qs,forward:Xs,back:Zs,disabled:et,detailLink:st,nested:tt,show:nt,hide:it};function at(){const{loggedIn:t,userInfo:a}=n.useContext(se);return t?e.jsxs("aside",{children:[(a==null?void 0:a.isAdminPanel)&&e.jsx("a",{href:P.ADMIN,children:"Админка"}),e.jsx("a",{href:P.ACCOUNT,children:"Профиль"}),e.jsx("a",{href:P.MY_ORDERS,children:"Заявки"}),e.jsx("a",{href:P.MY_REVIEWS,children:"Отзывы"}),e.jsx("a",{href:P.CASHBACK,children:"Кэшбэк"}),e.jsx("a",{href:P.REFERRALS,children:"Рефералы"})]}):null}function R({styles:t}){const{loggedIn:a,userInfo:i}=n.useContext(se);return e.jsxs("header",{children:[e.jsx("div",{children:e.jsxs("div",{className:t.container,children:[e.jsxs("a",{href:P.WEBSITE,className:t.logo,children:[e.jsx("img",{src:"/coin.svg",alt:"логотип-монета"}),e.jsx("img",{src:"/logo.svg",alt:"BitShift"})]}),!a&&e.jsxs("a",{href:P.LOGIN,className:t.login,children:[e.jsx("img",{src:"/icon-login.svg"}),"Войти"]}),a&&e.jsxs("div",{children:[e.jsxs("a",{href:P.ACCOUNT,className:t.user,children:[e.jsx("img",{src:"/icon-user.svg"}),(i==null?void 0:i.name)||""]}),e.jsxs("a",{href:P.LOGOUT,className:t.logout,children:[e.jsx("img",{src:"/icon-logout.svg"}),"Выход"]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:t.menu,children:[e.jsx("a",{href:"/",children:"Главная"}),e.jsx("a",{href:"/rules",children:"Правила"}),e.jsx("a",{href:"/news",children:"Новости"}),e.jsx("a",{href:"/reviews",children:"Отзывы"}),e.jsx("a",{href:"/contacts",children:"Контакты"})]})}),e.jsx(at,{})]})}function Y({styles:t}){return e.jsx("footer",{children:e.jsxs("div",{className:t.contactLinks,children:[e.jsx("a",{className:t.contactsTelegram,href:"tg://resolve?domain=e_bitshift",children:"@e_bitshift"}),e.jsx("a",{className:t.contactsEmail,href:"mailto:e@bitshift.su",children:"e@bitshift.su"})]})})}function rt(){const{userInfo:t,setUserInfo:a}=n.useContext(se),{sendUserInfo:i}=n.useContext(Z),[d,o]=n.useState(t),[l,r]=n.useState(!1),c=f=>{const{name:p,value:N}=f.target;o(x=>({...x||{},[p]:N}))},u=async()=>{try{r(!0);let f=await i({user:d});a(d),k.info(f)}finally{r(!1)}};return n.useEffect(()=>{!d&&t&&o(t)},[t]),l?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Профиль"}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.twoColOptions,children:[e.jsx("label",{htmlFor:"name",children:"Имя:"}),e.jsx("input",{name:"name",value:d==null?void 0:d.name,onChange:c}),e.jsx("label",{htmlFor:"mail",children:"Почта:"}),e.jsx("input",{name:"mail",value:d==null?void 0:d.mail,onChange:c}),e.jsx("label",{htmlFor:"password",children:"Пароль:"}),e.jsx("input",{name:"password",value:d==null?void 0:d.password,onChange:c})]}),e.jsx("button",{className:s.save,style:{margin:"2em 0 1em"},onClick:u,children:"Сохранить"})]}):e.jsx(Ge,{text:"Для просмотра профиля войдите на сайт с логином и паролем"})]})}),e.jsx(Y,{styles:s})]})})}const Pt=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"}));function ct(){return e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Условия обслуживания"}),e.jsx("p",{children:"Настоящие Условия обслуживания («Соглашение») регулируют использование услуг, предоставляемых eBitShift («Сервис») для обмена цифровых и электронных валют. Пользуясь нашими услугами, вы («Пользователь») соглашаетесь с этими условиями. Если вы не согласны, вы не можете использовать Сервис."}),e.jsx("p",{className:s.rulesBold,children:"1. Общие положения"}),e.jsx("p",{children:"1.1. Настоящее Соглашение определяет правила использования услуг eBitShift, доступных по адресу e.bitshift.su."}),e.jsx("p",{children:"1.2. Сервис может обновлять эти условия в любое время без предварительного уведомления. Изменения вступают в силу с момента публикации на сайте."}),e.jsx("p",{children:"1.3. При создании учетной записи Пользователь обязан предоставлять достоверную информацию. Указание ложных данных или поддельных документов запрещено и может привести к ограничению доступа к учетной записи или ее блокировке."}),e.jsx("p",{children:"1.4. Пользователь несет ответственность за безопасность своих персональных данных, используемых для доступа к услугам."}),e.jsx("p",{className:s.rulesBold,children:"2. Определения"}),e.jsxs("p",{children:["2.1. ",e.jsx("b",{children:"Сервис:"})," eBitShift — онлайн-платформа для обмена, покупки и продажи электронных валют."]}),e.jsxs("p",{children:["2.2. ",e.jsx("b",{children:"Пользователь:"})," Физическое лицо, принимающее данное Соглашение и использующее Сервис."]}),e.jsxs("p",{children:["2.3. ",e.jsx("b",{children:"Электронная валюта:"})," Цифровые или денежные обязательства, выпущенные платежными системами (например, криптовалюты, электронные кошельки)."]}),e.jsxs("p",{children:["2.4. ",e.jsx("b",{children:"Транзакция:"})," Перевод или обмен электронной валюты, инициированный Пользователем."]}),e.jsxs("p",{children:["2.5. ",e.jsx("b",{children:"Заявка:"})," Запрос Пользователя на выполнение транзакции через сайт Сервиса."]}),e.jsxs("p",{children:["2.6. ",e.jsx("b",{children:"Курс обмена:"})," Стоимостное соотношение двух валют при их обмене."]}),e.jsxs("p",{children:["2.7. ",e.jsx("b",{children:"Резерв:"})," Объем валюты, доступный для обмена на момент подачи Заявки."]}),e.jsx("p",{className:s.rulesBold,children:"3. Предоставляемые услуги"}),e.jsx("p",{children:"3.1. Сервис обеспечивает обмен электронных валют между платежными системами."}),e.jsx("p",{children:"3.2. Пользователи подают Заявки через сайт для инициирования транзакций."}),e.jsx("p",{children:"3.3. Сервис выполняет транзакции в соответствии с условиями платежных систем и доступными резервами."}),e.jsx("p",{children:"3.4. Сервис не является стороной соглашений между Пользователями и платежными системами и не несет ответственности за их действия."}),e.jsx("p",{children:"3.5. Транзакции от юридических лиц (например, ООО, ИП) или с использованием кредитных карт запрещены. Такие операции могут быть отменены без гарантированного возврата средств."}),e.jsx("p",{className:s.rulesBold,children:"4. Обязанности Пользователя"}),e.jsx("p",{children:"4.1. Пользователь подтверждает, что законно владеет средствами, участвующими в транзакциях."}),e.jsx("p",{children:"4.2. Пользователь обязан самостоятельно рассчитывать и уплачивать налоги в соответствии с местным законодательством."}),e.jsx("p",{children:"4.3. Пользователь должен указывать точные данные в Заявках. Сервис не несет ответственности за убытки, вызванные ошибками в предоставленной информации."}),e.jsx("p",{className:s.rulesBold,children:"5. Комиссии и курсы обмена"}),e.jsx("p",{children:"5.1. Курсы обмена указаны на сайте и могут изменяться без уведомления."}),e.jsx("p",{children:"5.2. Комиссия Сервиса включена в курс обмена."}),e.jsx("p",{children:"5.3. В Заявке отображаются курс обмена и итоговая сумма для отправки/получения."}),e.jsx("p",{children:"5.4. Курс и итоговая сумма фиксируются в момент создания заявки."}),e.jsxs("p",{children:["5.5. В редких случаях, когда после создания заказа происходят существенные изменения рыночной цены, делающие обмен невыгодным для Сервиса, Сервис оставляет за собой право отменить заказ.",e.jsx("br",{}),"В таких случаях пользователь получит полный возврат отправленных средств за вычетом комиссий сети (например, комиссий за транзакции блокчейна), которые не подлежат возврату. Пользователь будет незамедлительно уведомлен об отмене и деталях возврата."]}),e.jsx("p",{className:s.rulesBold,children:"6. AML (Противодействие отмыванию денег)"}),e.jsx("p",{children:"6.1. Сервис соблюдает требования по противодействию отмыванию денег (AML) для предотвращения мошенничества и незаконной деятельности."}),e.jsx("p",{children:"6.2. Сервис оценивает риски транзакций. Если уровень риска превышает 40% (на основе таких факторов, как источник средств, тип валюты или поведение Пользователя), транзакция подлежит дополнительной проверке."}),e.jsx("p",{children:"6.3. Сервис может запросить верификацию (например, документ, удостоверяющий личность, данные карты) в следующих случаях:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Транзакции с высокорисковыми платежными методами."}),e.jsx("li",{children:"Расхождения в предоставленных Пользователем данных."}),e.jsx("li",{children:"Подозрения в мошенничестве или несанкционированной деятельности."})]}),e.jsx("p",{children:"6.4. Невыполнение требований верификации может привести к приостановке или отмене транзакции."}),e.jsx("p",{children:"6.5. Сервис вправе отклонить или приостановить транзакции без объяснения причин при наличии AML-рисков."}),e.jsx("p",{className:s.rulesBold,children:"7. Процесс транзакции"}),e.jsx("p",{children:"7.1. Пользователь инициирует транзакцию, подавая Заявку и переводя исходную валюту."}),e.jsx("p",{children:"7.2. Сервис обрабатывает транзакцию и переводит результирующую валюту по согласованному курсу и условиям."}),e.jsx("p",{children:"7.3. Транзакция считается завершенной, когда результирующая валюта отправлена со счета Сервиса, что фиксируется платежной системой."}),e.jsx("p",{children:"7.4. Пользователь может отменить Заявку до оплаты. После оплаты транзакции являются окончательными, если не оговорено иное."}),e.jsx("p",{className:s.rulesBold,children:"8. Ответственность"}),e.jsx("p",{children:"8.1. Сервис несет ответственность только за средства, переданные ему для выполнения Заявки."}),e.jsx("p",{children:"8.2. Сервис не отвечает за:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Ошибки, задержки или сбои, вызванные платежными системами, банками или третьими лицами."}),e.jsx("li",{children:"Убытки, вызванные ошибками Пользователя или действиями третьих лиц."}),e.jsx("li",{children:"Технические сбои, неподконтрольные Сервису (например, недоступность сайта)."})]}),e.jsx("p",{children:"8.3. Если Пользователь добавляет несогласованные комментарии к банковским переводам, транзакция может быть отменена, а средства возвращены за вычетом расходов Сервиса."}),e.jsx("p",{children:"8.4. Стороны освобождаются от ответственности за неисполнение обязательств из-за форс-мажора (например, стихийные бедствия, изменения законодательства)."}),e.jsx("p",{className:s.rulesBold,children:"9. Прочие положения"}),e.jsx("p",{children:"9.1. Сервис может приостановить работу сайта для технического обслуживания. Пользователь принимает связанные с этим риски."}),e.jsx("p",{children:"9.2. Данные о Пользователе и транзакциях хранятся в базе Сервиса и не подлежат удалению."}),e.jsx("p",{children:"9.3. Сервис может отправлять Пользователю письма о статусе транзакции в рамках процесса обмена."}),e.jsx("p",{children:"9.4. В спорных ситуациях приоритет имеют записи транзакций, хранящиеся в Сервисе."}),e.jsx("p",{children:"9.5. Соглашение регулируется законодательством Российской Федерации, если иное не предусмотрено применимым правом."}),e.jsx("p",{className:s.rulesBold,children:"Создавая Заявку, Пользователь принимает данные условия как публичную оферту."})]})}),e.jsx(Y,{styles:s})]})})}const Bt=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"})),Ve=(t,a,i)=>{let d="";if(t<1){let o=a.fidelity;d=(1/t).toFixed(o)}else{let o=i.fidelity;d=t.toFixed(o)}return d=d.replace(/\.0+$/,""),t<1?`1 ${i.code} = ${d} ${a.code}`:`1 ${a.code} = ${d} ${i.code}`},Ye=async(t,a,i,d)=>{if(!t||!a)return;const[o,l]=await Promise.all([i({to:a.code}).then(c=>c.data.reserve),d({id:t}).then(c=>c.data)]),r=a.fidelity;return{reserve:parseFloat(o).toFixed(r).replace(/\.0+$/,""),limit:l}},He=async(t,a,i,d)=>{var N,x,h,v,S;const o=(await t({onlyGive:!0})).data,l=(o==null?void 0:o.find(w=>w.id===i))||(o==null?void 0:o[0]),r=(await a({fromId:l.id})).data,c=((N=r==null?void 0:r.items)==null?void 0:N.map(w=>({id:w.to.id,name:w.to.name,code:w.to.code,fidelity:w.to.fidelity})))||[],u=(c==null?void 0:c.find(w=>w.id===d))||(c==null?void 0:c[0]),f=(h=(x=r==null?void 0:r.items)==null?void 0:x.find(w=>w.to.id===u.id))==null?void 0:h.id,p=(S=(v=r==null?void 0:r.items)==null?void 0:v.find(w=>w.to.id===u.id))==null?void 0:S.price;return{giveList:o,giveSelected:l,getList:c,getSelected:u,directionId:f,price:p}},qe=async(t,a,i,d)=>{var p,N,x;const o=a.find(h=>h.id==t),l=(await i({toId:t})).data,r=((p=l==null?void 0:l.items)==null?void 0:p.map(h=>({id:h.from.id,name:h.from.name,code:h.from.code,fidelity:h.from.fidelity})))||[],c=r.find(h=>h.id===d.id)||r[0],u=(N=l==null?void 0:l.items)==null?void 0:N.find(h=>h.from.code==c.code).id,f=(x=l==null?void 0:l.items)==null?void 0:x.find(h=>h.from.code==c.code).price;return{giveList:r,giveSelected:c,getSelected:o,directionId:u,price:f}},Ke=async(t,a,i,d)=>{var p,N,x;const o=a.find(h=>h.id==t),l=(await i({fromId:t})).data,r=((p=l==null?void 0:l.items)==null?void 0:p.map(h=>({id:h.to.id,name:h.to.name,code:h.to.code,fidelity:h.to.fidelity})))||[],c=r.find(h=>h.id===d.id)||r[0],u=(N=l==null?void 0:l.items)==null?void 0:N.find(h=>h.to.code==c.code).id,f=(x=l==null?void 0:l.items)==null?void 0:x.find(h=>h.to.code==c.code).price;return{getList:r,giveSelected:o,getSelected:c,directionId:u,price:f}},Ne=(t,a,i,d,o,l,r,c)=>{(t==null?void 0:t.minSumGive)>0&&parseFloat(i)<(t==null?void 0:t.minSumGive)?r(`Минимум ${t.minSumGive.toFixed(o.fidelity)} ${o.code}`):(t==null?void 0:t.maxSumGive)>0&&parseFloat(i)>(t==null?void 0:t.maxSumGive)?r(`Максимум ${t.maxSumGive.toFixed(o.fidelity)} ${o.code}`):r(null);let u=lt(t==null?void 0:t.maxSumGet,a);(t==null?void 0:t.minSumGet)>0&&parseFloat(d)<(t==null?void 0:t.minSumGet)?c(`Минимум ${t.minSumGet.toFixed(l.fidelity)} ${l.code}`):u&&u<parseFloat(d)?c(`Максимум ${u.toFixed(l.fidelity)} ${l.code}`):c(null)},lt=(t,a)=>{const i=[t,a].filter(d=>d>0);return i.length>0?Math.min(...i):null};function dt(){const[t,a]=n.useState(!0),i=n.useRef(!1),{fetchCurrencies:d,fetchDirections:o,fetchNews:l}=n.useContext(Ce),{fetchUserReserve:r,fetchUserDirection:c,claimTempOrder:u,fetchPublicReviews:f,sendRefId:p}=n.useContext(Z),[N,x]=n.useState([]),[h,v]=n.useState([]),[S,w]=n.useState(),[A,I]=n.useState(),[M,H]=n.useState(),[q,W]=n.useState(),J=async(...m)=>{const b=m[0]?{...m[0],status:"active"}:{status:"active"};return await o(b,...m.slice(1))},[D,$]=n.useState(null),[j,y]=n.useState(null),[F,g]=n.useState(),[B,z]=n.useState(null),[Q,ne]=n.useState(),[Re,ue]=n.useState(),[xe,T]=n.useState(),[je,me]=n.useState([]),[ie,ve]=n.useState([]),fe=he(),Ie=async()=>{let m=localStorage.getItem("tempOrderId");if(m&&m!="null"&&!i.current)try{i.current=!0,a(!0);let b=await u({id:m});fe(`${P.ORDER_BY_ID}/${b.data.id}`,{state:{message:b.message,messageType:b.messageType}})}finally{localStorage.removeItem("tempOrderId"),a(!1)}},Te=async()=>{w(""),I("");const{giveList:m,giveSelected:b,getList:G,getSelected:U,directionId:V,price:K}=await He(d,J,j==null?void 0:j.id,D==null?void 0:D.id);x(m),$(b),v(G),y(U),g(V),ne(K),await ae(K,b,U,V)},te=async()=>{let[m,b]=await Promise.all([l({count:2,textSize:200}).then(G=>G.data.items),f({count:2,textSize:200}).then(G=>G.data.items)]);me(m),ve(b)},de=async()=>{try{a(!0),Te(),te()}finally{a(!1)}};n.useEffect(()=>{const b=new URLSearchParams(window.location.search).get("rid");b&&p({rid:b}),Ie(),de()},[]);const ae=async(m,b,G,U)=>{w(""),I("");const V=Ve(m,b,G);V&&ue(V);const{reserve:K,limit:be}=await Ye(U,G,r,c);T(parseFloat(K).toFixed(b.fidelity).replace(/\.0+$/,"")),z(be),Ne(be,K,S,A,b,G,H,W)};n.useEffect(()=>{Ne(B,xe,S,A,D,j,H,W)},[S,A]);const ge=async m=>{a(!0);try{const{giveList:b,giveSelected:G,getSelected:U,directionId:V,price:K}=await qe(m,h,J,D);x(b),$(G),y(U),g(V),ne(K),await ae(K,G,U,V)}finally{a(!1)}},pe=async m=>{a(!0);try{const{getList:b,giveSelected:G,getSelected:U,directionId:V,price:K}=await Ke(m,N,J,j);v(b),$(G),y(U),g(V),ne(K),await ae(K,G,U,V)}finally{a(!1)}},we=async()=>{de()},re=()=>{if(B!=null&&B.popup,!D||!j||!S||!A)return;let m=new URLSearchParams;m.append("directionId",F),m.append("amountGet",A),fe(`${P.CHECKUP_ORDER}?${m.toString()}`)},_e=m=>{const b=m.replace(/[^0-9. ,]/g,"");I(b);const G=(b/Q).toFixed(D.fidelity);w(G)},ce=m=>{const b=m.replace(/[^0-9. ,]/g,"");w(b);const G=(b*Q).toFixed(j.fidelity);I(G)};return t?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsxs("div",{className:s.obmenBar,children:[e.jsxs("div",{className:s.threeCol,children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Отдаю"}),e.jsx(ye,{rows:N,selectedId:D==null?void 0:D.id,setSelectedId:pe}),e.jsx("input",{className:s.currencyAmount,placeholder:B==null?void 0:B.minSumGive.toFixed(D.fidelity),value:S,onChange:m=>ce(m.target.value)}),M&&e.jsx("div",{className:s.warning,children:M})]}),e.jsx("a",{className:s.changeDirections,onClick:we,children:e.jsx("img",{src:"/change-directions.svg",alt:"Поменять направления местами"})}),e.jsxs("div",{children:[e.jsx("h3",{children:"Получаю"}),e.jsx(ye,{rows:h,selectedId:j==null?void 0:j.id,setSelectedId:ge}),e.jsx("input",{className:s.currencyAmount,placeholder:B==null?void 0:B.minSumGet.toFixed(j.fidelity),value:A,onChange:m=>_e(m.target.value)}),q&&e.jsx("div",{className:s.warning,children:q}),Re&&e.jsxs("p",{children:["Курс: ",Re]}),xe>0&&e.jsxs("p",{children:["Резерв: ",xe," ",j==null?void 0:j.code]})]})]}),e.jsx("button",{className:s.obmenButton,onClick:re,children:"Обменять"})]}),ie&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.decoratedHeader,children:e.jsx("h2",{children:"Отзывы"})}),e.jsx("div",{className:s.reviews,children:Array.from(ie).map((m,b)=>e.jsxs("div",{children:[e.jsx("h3",{children:m.caption}),new Date(m.date).toLocaleString(),e.jsx("div",{style:{display:"grid",placeItems:"center"},children:e.jsx(Se,{value:m.rating,disabled:!0})}),e.jsx("p",{children:m.text})]},b))})]}),je&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.decoratedHeader,children:e.jsx("h2",{children:"Новости"})}),e.jsx("div",{className:s.reviews,children:Array.from(je).map((m,b)=>e.jsxs("div",{style:{height:"100%"},children:[e.jsx("h3",{children:m.caption}),new Date(m.date).toLocaleString(),e.jsx("p",{children:m.text}),e.jsx("p",{className:s.detailLink,children:e.jsx("a",{href:`${P.WEBSITE_NEWS}/${m.id}`,children:"Подробнее..."})})]},b))})]})]}),e.jsx(Y,{styles:s})]})})}const Gt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));function ot(){const[t,a]=n.useState(!0),i=new URLSearchParams(window.location.search),d=he(),{fetchCurrencies:o,fetchDirections:l,fetchOrderStatus:r,getDirectionId:c}=n.useContext(Ce),{fetchUserReserve:u,fetchUserDirection:f,sendUserOrder:p,sendRefId:N}=n.useContext(Z),{userInfo:x}=n.useContext(se),[h,v]=n.useState([]),[S,w]=n.useState([]),[A,I]=n.useState(),[M,H]=n.useState(i.get("amountGet")),[q,W]=n.useState(),[J,D]=n.useState(),[$,j]=n.useState(null),[y,F]=n.useState(null),[g,B]=n.useState(null),[z,Q]=n.useState(i.get("directionId")),[ne,Re]=n.useState(i.get("cur_from")),[ue,xe]=n.useState(i.get("cur_to")),[T,je]=n.useState(null),[me,ie]=n.useState(),[ve,fe]=n.useState(),[Ie,Te]=n.useState(),[te,de]=n.useState(),[ae,ge]=n.useState([]),[pe,we]=n.useState([]),[re,_e]=n.useState(),[ce,m]=n.useState(),[b,G]=n.useState(null),[U,V]=n.useState(),K=(_,O)=>{_e(C=>({...C,[_]:O}))},be=(_,O)=>{m(C=>({...C,[_]:O}))},Fe=async(_,O,C,L)=>{const E=Ve(_,O,C);E&&fe(E);const{reserve:X,limit:le}=await Ye(L,C,u,f);Te(parseFloat(X).toFixed(O.fidelity).replace(/\.0+$/,"")),je(le),Ne(le,X,A,M,O,C,W,D)},Je=async _=>{a(!0);try{const{giveList:O,giveSelected:C,getSelected:L,directionId:E,price:X}=await qe(_,S,l,y);v(O),F(C),B(L),Q(E),ie(X),await Fe(X,C,L,E)}finally{a(!1)}},Qe=async _=>{a(!0);try{const{getList:O,giveSelected:C,getSelected:L,directionId:E,price:X}=await Ke(_,h,l,g);w(O),F(C),B(L),Q(E),ie(X),await Fe(X,C,L,E)}finally{a(!1)}},Xe=async()=>{if(!y||!g){k.warn("Выберите валюту Отдаю и Получаю");return}if(A==0||M==0){k.warn("Сумма для обмена должна быть больше 0");return}let _=Object.fromEntries(ae.filter(L=>L.isRequired).map(L=>[L.name,(re==null?void 0:re[L.name])??null]).filter(([L,E])=>E==null));if(Object.keys(_).length>0){k.warn(`Нужно заполнить поля Отдаю: ${Object.keys(_)}`);return}let O=Object.fromEntries(pe.filter(L=>L.isRequired).map(L=>[L.name,(ce==null?void 0:ce[L.name])??null]).filter(([L,E])=>E==null));if(Object.keys(O).length>0){k.warn(`Нужно заполнить поля Получаю: ${Object.keys(O)}`);return}if((U==null?void 0:U.trim().length)==0){k.warn("Адрес почты не указан");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U)){k.warn("Укажите адрес почты в формате a@b.com");return}if((te==null?void 0:te.trim().length)==0){k.warn("Адрес кошелька не указан");return}if(b==!1){k.warn("Адрес кошелька неправильный");return}let C=await p({body:{email:U,currencyFromId:y.id,currencyToId:g.id,amountFrom:A,amountTo:M,wallet:te,giveFields:re||{},getFields:ce||{}}});C.data.tempOrderId&&localStorage.setItem("tempOrderId",C.data.tempOrderId||null),C.action=="LOGIN"&&d(P.LOGIN,{state:{message:C.message,login:C.login}}),C.action=="ORDER_BY_ID"&&d(`${P.ORDER_BY_ID}/${C.data.id}`,{state:{message:C.message,messageType:C.messageType}}),k.info(C.message)},Ze=_=>{const O=_.replace(/[^0-9. ,]/g,"");H(O);const C=(O/me).toFixed(y.fidelity);I(C)},es=_=>{const O=_.replace(/[^0-9. ,]/g,"");I(O);const C=(O*me).toFixed(g.fidelity);H(C)};return n.useEffect(()=>{(async()=>{try{a(!0);const C=new URLSearchParams(window.location.search).get("rid");C&&N({rid:C}),ge([]),we([]),_e(null),m(null);let L=0;if(!z&&(ne||ue)){let ee=(await c({from:ne,to:ue})).data;Q(ee),L=ee}const E=(await f({id:z||L})).data;ge(E.giveFields),we(E.getFields);const[X,le]=await Promise.all([He(o,l,E.fromId,E.toId),r({id:E.statusId}).then(ee=>ee.data)]),{giveList:ss,giveSelected:Pe,getList:ts,getSelected:Oe,directionId:ns,price:Be}=X;V(x==null?void 0:x.mail),v(ss),F(Pe),B(Oe),w(ts),ie(Be);let is=le==null?void 0:le.list.reduce((ee,De)=>(ee[De.statusType]=De.text,ee),{});if(j(is),z!=parseInt(i.get("directionId")))I(""),H(""),de(""),G(null);else{const ee=(M/Be).toFixed(Pe.fidelity);I(ee),await Fe(Be,Pe,Oe,ns)}}finally{a(!1)}})()},[z]),n.useEffect(()=>{Ne(T,Ie,A,M,y,g,W,D)},[A,M]),t?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Создание заявки"}),$==null?void 0:$.deadlines]}),e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Отдаете"}),e.jsxs("div",{className:s.twoCol,children:[e.jsxs("div",{children:[e.jsx(ye,{rows:h,selectedId:y==null?void 0:y.id,setSelectedId:Qe}),ve&&e.jsxs("p",{children:["Курс:  ",ve]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:s.alignRight,children:["Сумма*:  ",e.jsx("input",{className:s.currencyAmount,placeholder:T==null?void 0:T.minSumGive.toFixed(y==null?void 0:y.fidelity),value:A,onChange:_=>es(_.target.value)})]}),q&&e.jsx("div",{className:s.warning,children:q}),(T==null?void 0:T.minSumGive)>0&&e.jsxs("p",{children:["Мин:  ",T.minSumGive.toFixed(y.fidelity)," ",y==null?void 0:y.code]}),(T==null?void 0:T.maxSumGive)>0&&e.jsxs("p",{children:["Макс:  ",T.maxSumGive.toFixed(y.fidelity)," ",y==null?void 0:y.code]}),ae.map(_=>e.jsx($e,{name:_.name,value:_.value,onChange:K,placeholder:_.hint,isRequired:_.isRequired},_.name))]})]})]}),e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Получаете"}),e.jsxs("div",{className:s.twoCol,children:[e.jsxs("div",{children:[e.jsx(ye,{rows:S,selectedId:g==null?void 0:g.id,setSelectedId:Je}),e.jsx("p",{children:"На счет*:"}),e.jsx(as,{currencyId:g==null?void 0:g.id,wallet:te,setWallet:de,className:s.wallet,result:b,setResult:G})]}),e.jsxs("div",{children:[e.jsxs("label",{className:s.alignRight,children:["Сумма*:  ",e.jsx("input",{className:s.currencyAmount,placeholder:T==null?void 0:T.minSumGet.toFixed(g==null?void 0:g.fidelity),value:M,onChange:_=>Ze(_.target.value)})]}),J&&e.jsx("div",{className:s.warning,children:J}),(T==null?void 0:T.minSumGet)>0&&e.jsxs("p",{children:["Мин:  ",T.minSumGet.toFixed(g.fidelity)," ",g==null?void 0:g.code]}),(T==null?void 0:T.maxSumGet)>0&&e.jsxs("p",{children:["Макс:  ",T.maxSumGet.toFixed(g.fidelity)," ",g==null?void 0:g.code]}),pe.map(_=>e.jsx($e,{name:_.name,value:_.value,onChange:be,placeholder:_.hint,isRequired:_.isRequired},_.name))]})]})]}),($==null?void 0:$.instructions)&&e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Инструкции по обмену"}),$==null?void 0:$.instructions]}),e.jsxs("div",{className:s.dataBar,children:[e.jsxs("div",{children:["E-mail*:   ",e.jsx("input",{className:s.field,value:U,onChange:_=>V(_.target.value)})]}),e.jsx("div",{style:{marginTop:"1em"},children:e.jsx("button",{className:s.sendButton,onClick:Xe,children:"Отправить"})})]})]}),e.jsx(Y,{styles:s})]})})}function $e({name:t,value:a,onChange:i,placeholder:d,isRequired:o}){return e.jsx("div",{style:{marginTop:"1em"},children:e.jsxs("label",{children:[t,o?e.jsx(e.Fragment,{children:"*:  "}):":",e.jsx("input",{value:a,onChange:l=>i(t,l.target.value),className:s.field,placeholder:d})]})})}const Lt=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"})),ht=({data:t})=>{var a;return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("a",{href:`${P.ORDER_BY_ID}/${t.id}`,children:t.id})}),e.jsx("div",{children:e.jsx("a",{href:`${P.ORDER_BY_ID}/${t.id}`,children:new Date(t.dateCreated).toLocaleString()})}),e.jsx("div",{children:t.give}),e.jsx("div",{children:t.get}),e.jsx("div",{children:((a=Ae.find(i=>i.id==t.status))==null?void 0:a.name)||t.status})]})},ut=({data:t})=>t.length==0?e.jsx("div",{children:"Нет заявок"}):e.jsxs("div",{className:s.tableFiveCol,children:[e.jsx("div",{children:"Номер (id)"}),e.jsx("div",{children:"Дата"}),e.jsx("div",{children:"Отдаю"}),e.jsx("div",{children:"Получаю"}),e.jsx("div",{children:"Статус"}),t.map((a,i)=>e.jsx(ht,{data:a},i))]});function Ee({total:t,currentPage:a,rowsPerPage:i,onPageChange:d,styles:o}){const l=Math.ceil(t/i);if(l<=1)return null;const r=(c,u)=>{c.preventDefault(),d(u)};return e.jsxs("div",{className:o.pagination,children:[e.jsx("a",{href:"#",className:`${o.pageLink} ${o.back} ${a===0?o.disabled:""}`,onClick:c=>a>0&&r(c,a-1),children:e.jsx("img",{src:"/big-arrow.svg",alt:"Назад",className:o.arrow})}),e.jsxs("span",{children:["Страница ",a+1," из ",l]}),e.jsx("a",{href:"#",className:`${o.pageLink} ${o.forward} ${a+1===l?o.disabled:""}`,onClick:c=>a+1<l&&r(c,a+1),children:e.jsx("img",{src:"/big-arrow.svg",alt:"Вперед",className:o.arrow})})]})}function xt(){const{fetchUserOrders:t}=n.useContext(Z),[a,i]=n.useState(!0),[d,o]=n.useState([]),l=10,[r,c]=n.useState(0),[u,f]=n.useState(0),{userInfo:p}=n.useContext(se);return n.useEffect(()=>{(async()=>{try{i(!0);const x=r*l;let h=(await t({start:x,count:l})).data;f(h.total),o(h.items.map(v=>({...v,give:v.amountFrom+" "+v.fromName,get:v.amountTo+" "+v.toName})))}finally{i(!1)}})()},[r]),a?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Заявки"}),e.jsx(Ee,{total:u,currentPage:r,rowsPerPage:l,onPageChange:c,styles:s}),p?e.jsx(ut,{data:d}):e.jsx(Ge,{text:"Для просмотра заявок войдите на сайт с логином и паролем"}),e.jsx(Ee,{total:u,currentPage:r,rowsPerPage:l,onPageChange:c,styles:s})]})}),e.jsx(Y,{styles:s})]})})}const Ot=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));function jt(){var $;const{id:t}=Le(),{state:a}=rs(),{fetchUserOrder:i,sendTxId:d,deleteUserOrder:o}=n.useContext(Z),[l,r]=n.useState(!1),[c,u]=n.useState(),f=n.useRef(null),[p,N]=n.useState(null),[x,h]=n.useState(),[v,S]=n.useState(),[w,A]=n.useState(),[I,M]=n.useState(),H=n.useRef(!1),q=async()=>{try{r(!0),console.log("set true");const j=(await i({id:t})).data;u(j),f.current=j,h(j.fromName),S(j.toName)}catch(j){A(j.message)}finally{r(!1),console.log("set false")}},W=async()=>{const j=await d({id:I});k.info(j.message)},J=async()=>{const j=await o({id:t});k.info(j.message),q()},D=j=>{const y=Math.floor(j/60),F=j%60;return`${y}:${F<10?"0"+F:F}`};return n.useEffect(()=>{q();const j=setInterval(()=>{f.current&&f.current.isActive?(console.log("Обновляю статус заявки..."),q()):clearInterval(j)},3e4),F=setInterval(()=>{if(f.current&&f.current.dateStatusUpdated){const g=new Date(f.current.dateStatusUpdated).getTime(),B=Date.now(),z=f.current.deleteInterval*60||1800,Q=Math.max(0,z-Math.floor((B-g)/1e3));N(Q)}},1e3);return()=>{clearInterval(j),clearInterval(F)}},[t]),w?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsx("div",{className:s.dataBar,children:e.jsx("p",{children:w})})}),e.jsx("footer",{})]}):l||!c||!x||!v?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):(!H.current&&(a!=null&&a.messageType)&&(a.messageType==="warning"?k.warn(a.message):a.messageType==="info"&&k.info(a.message),H.current=!0),e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:s.dataBar,children:[(a==null?void 0:a.messageType)==="warning"&&e.jsx("div",{className:s.warning,children:a==null?void 0:a.message}),e.jsx("h3",{children:c.isActive?"Активная заявка":"Закрытая заявка"}),c.isActive?p!==null?e.jsxs("div",{className:s.countdown,children:["Истекает через: ",D(p)]}):e.jsx("div",{className:s.countdown,children:"Расчет времени..."}):null,e.jsxs("div",{className:s.tableTwoCol,children:[e.jsx("div",{children:"Номер заявки:"}),e.jsx("div",{children:c.id}),e.jsx("div",{children:"Отдаю:"}),e.jsxs("div",{children:[c.amountFrom," ",x," ",c.walletFrom?`на счет ${c.walletFrom}`:""]}),e.jsx("div",{children:"Получаю:"}),e.jsxs("div",{children:[c.amountTo," ",v," на счет ",c.walletTo]}),e.jsx("div",{children:"Создана:"}),e.jsx("div",{children:new Date(c.dateCreated).toLocaleTimeString()}),c.dateUpdated&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Обновлена:"}),e.jsx("div",{children:new Date(c.dateUpdated).toLocaleTimeString()})]}),e.jsx("div",{children:"Статус:"}),e.jsx("div",{children:(($=Ae.find(j=>j.id==c.status))==null?void 0:$.name)||c.status}),c.requisites.size>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Реквизиты:"}),e.jsx("div",{children:c.requisites})]})]}),e.jsxs("div",{children:[e.jsx(ke,{title:"Дополнительные поля Отдаю",fields:c.fieldsGive}),e.jsx(ke,{title:"Дополнительные поля Получаю",fields:c.fieldsGet}),c.isActive&&c.needsTxId&&e.jsxs("div",{children:[e.jsx("input",{value:I,onChange:j=>M(j.target.value),className:s.field,style:{marginRight:"1em"},placeholder:"Укажите txId, чтобы ускорить обработку заявки"}),e.jsx("button",{onClick:W,children:"Отправить txId"})]})]}),c.isActive&&e.jsx("button",{className:s.sendButton,onClick:J,children:"Отменить заявку"})]})}),e.jsx(Y,{styles:s})]})}))}function ke({title:t,fields:a}){return!a||Object.keys(a).length===0?null:e.jsxs(e.Fragment,{children:[e.jsxs("h4",{children:[t,":"]}),e.jsx("div",{className:s.tableTwoCol,children:Object.entries(a).map(([i,d])=>e.jsxs(cs.Fragment,{children:[e.jsx("div",{children:i}),e.jsx("div",{children:d})]},i))})]})}const Dt=Object.freeze(Object.defineProperty({__proto__:null,default:jt},Symbol.toStringTag,{value:"Module"}));function mt(){return e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:[s.dataBar,s.contactPage].join(" "),children:[e.jsx("h3",{children:"Контакты"}),e.jsx("h4",{children:"График работы:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Поддержка и ручные обмены с RUB:",e.jsx("br",{}),"пн–пт: 10:00–22:00 (МСК, GMT+3).",e.jsx("br",{}),"сб–вс: свободный график."]}),e.jsx("li",{children:"Автоматические обмены криптовалют: круглосуточно, 24/7."})]}),e.jsx("h4",{children:"О нашем движке:"}),"Этот сервис — наша собственная разработка, созданная с нуля. Мы активно работаем над улучшениями: приводим в порядок документацию и добавляем новые модули. Скоро наш движок станет доступен для установки на другие сайты! Следите за анонсами на основном домене: ",e.jsx("a",{href:"https://bitshift.su",children:"bitshift.su"}),".",e.jsx("h4",{children:"Обратная связь:"}),"Мы открыты к вашим идеям по улучшению сервиса! Если вы нашли ошибку, пожалуйста, ",e.jsx("a",{href:"mailto:e@bitshift.su",children:"напишите нам."}),e.jsx("br",{}),"Для оперативного решения вопроса приложите:",e.jsxs("ul",{children:[e.jsx("li",{children:"Скриншоты;"}),e.jsx("li",{children:"Версию браузера;"}),e.jsx("li",{children:"Описание условий, при которых возникла ошибка."})]})]})}),e.jsx(Y,{styles:s})]})})}const $t=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));function vt(){const[t,a]=n.useState(!0),{fetchNews:i}=n.useContext(Ce),[d,o]=n.useState([]),[l,r]=n.useState(0),[c,u]=n.useState(0),f=10;if(n.useEffect(()=>{(async()=>{try{const x=l*f,h=await i({start:x,count:f,textSize:150});o(h.data.items),u(h.data.total)}finally{a(!1)}})()},[l]),t)return e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]});const p=({data:N})=>e.jsx(e.Fragment,{children:N.map((x,h)=>e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:x.caption}),new Date(x.date).toLocaleString(),e.jsx("p",{children:x.text}),e.jsx("p",{className:s.detailLink,children:e.jsx("a",{href:`${P.WEBSITE_NEWS}/${x.id}`,children:"Подробнее..."})})]},h))});return e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsx("h2",{style:{marginBottom:0},children:"Новости"}),e.jsx(p,{data:d})]}),e.jsx(Y,{styles:s})]})})}const Et=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"}));function ft(){const[t,a]=n.useState(!0),{fetchNewsRecord:i}=n.useContext(Ce),[d,o]=n.useState(),{id:l}=Le(),r=he();n.useEffect(()=>{(async()=>{try{const f=await i({id:l});o(f.data)}finally{a(!1)}})()},[l]);const c=u=>{u.preventDefault(),window.history.length>1?r(-1):r(P.WEBSITE)};return t?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsx("h2",{style:{marginBottom:0},children:d.caption}),e.jsxs("div",{className:s.dataBar,children:[new Date(d.date).toLocaleString(),e.jsx("p",{dangerouslySetInnerHTML:{__html:d.text}}),e.jsx("div",{className:s.detailLink,children:e.jsx("a",{href:"#",onClick:c,children:"Назад"})})]})]}),e.jsx(Y,{styles:s})]})})}const kt=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"})),gt=({data:t,rowsSelected:a,setRowsSelected:i})=>{var d;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",id:t.id,checked:a.includes(t.id),onChange:()=>{a.includes(t.id)?i(a.filter(o=>o!==t.id)):i([...a,t.id])}}),new Date(t.date).toLocaleString()]}),e.jsx("div",{style:{display:"grid",placeItems:"center"},children:e.jsx(Se,{id:"rating",value:t==null?void 0:t.rating,size:20,disabled:!0})})]}),e.jsx("div",{children:t.caption}),e.jsx("div",{children:e.jsx("a",{href:`${P.MY_REVIEW_BY_ID}/${t.id}`,children:t.text})}),e.jsx("div",{children:((d=Ue.find(o=>o.id==t.status))==null?void 0:d.name)||t.status})]})},pt=({data:t,rowsSelected:a,setRowsSelected:i})=>t.length==0?e.jsx("p",{children:"Нет отзывов"}):e.jsxs("div",{className:s.tableFourCol,children:[e.jsx("div",{children:"Дата | Оценка"}),e.jsx("div",{children:"Имя"}),e.jsx("div",{children:"Текст"}),e.jsx("div",{children:"Статус"}),t.map((d,o)=>e.jsx(gt,{data:d,rowsSelected:a,setRowsSelected:i},o))]});function wt(){const{fetchUserReviews:t,deleteUserReviews:a}=n.useContext(Z),{userInfo:i}=n.useContext(se),[d,o]=n.useState(!0),[l,r]=n.useState(!1),[c,u]=n.useState([]),f=he(),[p,N]=n.useState([]),x=()=>{f(P.MY_REVIEW_BY_ID)},h=async()=>{try{r(!0);let w=await a({ids:p});k.info(w.message),S()}finally{r(!1)}},v=()=>e.jsxs("div",{className:s.actionButtons,children:[e.jsxs("p",{children:["Выбрано ",p.length," элементов."]}),e.jsx("button",{onClick:h,children:"Удалить"})]}),S=async()=>{try{o(!0);let w=await t({textSize:15});u(w.data.items)}finally{o(!1)}};return n.useEffect(()=>{S()},[]),d|l?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{style:{marginBottom:"1em"},children:"Мои отзывы"}),i?e.jsxs(e.Fragment,{children:[e.jsx(pt,{data:c,rowsSelected:p,setRowsSelected:N}),e.jsxs("div",{className:s.twoColReviews,children:[e.jsx("button",{className:s.save,style:{margin:"1em 0",maxHeight:"2.5rem"},onClick:x,children:"Добавить отзыв.."}),p.length>0&&e.jsx(v,{})]})]}):e.jsx(Ge,{text:"Для просмотра личных отзывов войдите на сайт с логином и паролем"})]})}),e.jsx(Y,{styles:s})]})})}const At=Object.freeze(Object.defineProperty({__proto__:null,default:wt},Symbol.toStringTag,{value:"Module"}));function _t(){var h;const{fetchUserReviewById:t,sendUserReview:a}=n.useContext(Z),[i,d]=n.useState(!1),[o,l]=n.useState(!1),[r,c]=n.useState({text:""}),{id:u}=Le(),f=he(),[p,N]=n.useState(0),x=async()=>{try{l(!0);let v={text:r.text,rating:r.rating};u&&(v={...v,id:u});let S=await a({review:v});k.info(S.message),!u&&f(P.MY_REVIEWS)}finally{l(!1)}};return n.useEffect(()=>{u&&(async()=>{try{d(!0);let S=await t({id:u});c(S.data)}finally{d(!1)}})()},[u]),i||o?e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]}):e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("main",{children:e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:u?`Отзыв id=${u}`:"Добавление отзыва"}),(r==null?void 0:r.date)&&e.jsxs("p",{children:[e.jsx("b",{children:"Создан:"})," ",new Date(r.date).toLocaleString()]}),(r==null?void 0:r.caption)&&e.jsxs("p",{children:[e.jsx("b",{children:"Заголовок:"})," ",r.caption]}),(r==null?void 0:r.status)&&e.jsxs("p",{children:[e.jsx("b",{children:"Статус:"})," ",((h=Ue.find(v=>v.id==r.status))==null?void 0:h.name)||r.status]}),e.jsx(Se,{value:r==null?void 0:r.rating,onChange:v=>c({...r,rating:v}),size:40}),e.jsxs("p",{children:["Оценка: ",r==null?void 0:r.rating]}),e.jsx("textarea",{rows:"10",cols:"40",style:{width:"100%"},value:r.text,onChange:v=>c({...r,text:v.target.value})}),e.jsxs("div",{className:s.twoColOptions,style:{marginTop:"2em"},children:[e.jsx("button",{className:s.save,onClick:x,children:"Сохранить"}),e.jsx("a",{href:P.MY_REVIEWS,children:"<< К списку отзывов"})]})]})}),e.jsx(Y,{styles:s})]})})}const Ut=Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"}));function bt(){const[t,a]=n.useState(!0),{fetchPublicReviews:i}=n.useContext(Z),[d,o]=n.useState([]),[l,r]=n.useState(0),[c,u]=n.useState(0),f=10;if(n.useEffect(()=>{(async()=>{try{const x=l*f,h=(await i({start:x,count:f})).data;u(h.total),o(h.items)}finally{a(!1)}})()},[l]),t)return e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]});const p=({data:N})=>e.jsx(e.Fragment,{children:N.map(x=>e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:x.caption}),e.jsx(Se,{value:x.rating,size:"20",disabled:!0}),e.jsxs("p",{children:[new Date(x.date).toLocaleString(),e.jsx("p",{children:x.text})]})]}))});return e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsx("h2",{style:{marginBottom:0},children:"Отзывы"}),e.jsx(p,{data:d}),e.jsx(oe,{total:c,currentPage:l,rowsPerPage:f,onPageChange:r,className:s.pagination})]}),e.jsx(Y,{styles:s})]})})}const Mt=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"})),yt=({data:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:new Date(t.dateCreated).toLocaleString()}),e.jsxs("div",{children:[t.userName," | ",t.userMail]}),e.jsxs("div",{children:[t.fromName," (",t.fromCode,") | ",t.amountFrom]}),e.jsxs("div",{children:[t.toName," (",t.toCode,") | ",t.amountTo]}),e.jsx("div",{children:t.earnings})]}),Nt=({data:t})=>t.length==0?e.jsx("p",{children:"Нет обменов"}):e.jsxs("div",{className:s.tableFiveCol,children:[e.jsx("div",{children:"Дата"}),e.jsx("div",{children:"Имя | Почта"}),e.jsx("div",{children:"Отдаю | Сумма"}),e.jsx("div",{children:"Получаю | Сумма"}),e.jsx("div",{children:"Ваш бонус"}),t.map((a,i)=>e.jsx(yt,{data:a},i))]});function Ct(){var y;const[t,a]=n.useState(!0),[i,d]=n.useState(),[o,l]=n.useState(),[r,c]=n.useState(),[u,f]=n.useState(),[p,N]=n.useState(),[x,h]=n.useState(!1),[v,S]=n.useState(0),w=10,{loggedIn:A,userInfo:I}=n.useContext(se),{fetchUserReferralsStatus:M,fetchUserReferrals:H,sendUserReferralsWithdraw:q}=n.useContext(Z);async function W(){try{a(!0);const F=v*w;let[g,B]=await Promise.all([M().then(z=>z.data),H({start:F,count:w,dateStart:u==null?void 0:u.concat("T00:00"),dateEnd:p==null?void 0:p.concat("T00:00")}).then(z=>z.data)]);console.log("refs:",B),console.log("status:",g),c(B.total),l(B.items),d(g)}finally{a(!1)}}n.useEffect(()=>{W()},[v]);function J(){v==0?W():S(0)}async function D(){try{a(!0);let F=await q();k.info(F.message),W()}finally{a(!1)}}if(t)return e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]});const $=(y=Me.find(F=>F.id===(I==null?void 0:I.referralType)))==null?void 0:y.name,j=window.location.origin;return e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Реферальная система"}),I?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("b",{children:"Ваша реф. ссылка:"}),"  ",e.jsxs("a",{href:`${j}?rid=1`,children:[j,"?rid=1"]})]}),e.jsxs("p",{children:["Вы получите бонус в ",I.referralPercent,"% ",$," с каждой сделки. Отправьте ссылку другу."]}),e.jsxs("p",{children:[e.jsx("b",{children:"Всего начислено:"}),"  ",(i==null?void 0:i.sum)||0," USDT"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Всего выплачено:"}),"  ",(i==null?void 0:i.payed)||0," USDT"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Баланс:"}),"  ",(i==null?void 0:i.sum)-(i==null?void 0:i.payed)||0," USDT"]}),i!=null&&i.activePayout?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Ваш запрос на выплату обрабатывается оператором."}),e.jsxs("p",{children:["Дата: ",i.activePayout.dateCreated]}),e.jsxs("p",{children:["Сумма: ",i.activePayout.amount]})]}):(i==null?void 0:i.sum)-(i==null?void 0:i.payed)>10?e.jsx("button",{className:s.save,style:{margin:"1em 0",maxHeight:"2.5rem"},onClick:D,children:"Отправить запрос на выплату..."}):"Можно вывести бонусы, если баланс > 10 USDT"]}):e.jsx(ze,{text:"Для просмотра рефералов войдите на сайт с логином и паролем"})]}),I&&e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Мои рефералы"}),e.jsx(We,{title:"Фильтр",isVisible:x,setIsVisible:h,styles:s,child:e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1em"},children:[e.jsxs("label",{children:["Дата от: ",e.jsx("input",{type:"date",value:u,name:"dateStart",onChange:F=>f(F.target.value)})]}),e.jsxs("label",{children:["Дата до: ",e.jsx("input",{type:"date",value:p,name:"dateEnd",onChange:F=>N(F.target.value)})]})]}),e.jsx("button",{onClick:J,children:"Применить"})]})}),e.jsx(oe,{total:r,currentPage:v,rowsPerPage:w,onPageChange:S,styles:s}),e.jsx(Nt,{data:o}),e.jsx(oe,{total:r,currentPage:v,rowsPerPage:w,onPageChange:S,styles:s})]})]}),e.jsx(Y,{styles:s})]})})}const Wt=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"})),St=({data:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{children:new Date(t.dateCreated).toLocaleString()}),e.jsxs("div",{children:[t.userName," | ",t.userMail]}),e.jsxs("div",{children:[t.amountFrom," ",t.fromName," (",t.fromCode,")"]}),e.jsxs("div",{children:[t.amountTo," ",t.toName," (",t.toCode,")"]}),e.jsx("div",{children:t.earnings.toFixed(2)})]}),Rt=({data:t})=>t.length==0?e.jsx("p",{children:"Нет обменов"}):e.jsxs("div",{className:s.tableFiveCol,children:[e.jsx("div",{children:"Дата"}),e.jsx("div",{children:"Имя | Почта"}),e.jsx("div",{children:"Отдаю"}),e.jsx("div",{children:"Получаю"}),e.jsx("div",{children:"Ваш бонус, USDT"}),t.map((a,i)=>e.jsx(St,{data:a},i))]});function It(){var j,y,F;const[t,a]=n.useState(!0),[i,d]=n.useState(),[o,l]=n.useState(),[r,c]=n.useState(),[u,f]=n.useState(),[p,N]=n.useState(),[x,h]=n.useState(!1),[v,S]=n.useState(0),w=10,{loggedIn:A,userInfo:I}=n.useContext(se),{fetchUserCashbackStatus:M,fetchUserCashback:H,sendUserCashbackWithdraw:q}=n.useContext(Z);async function W(){try{a(!0);const g=v*w,[B,z]=await Promise.all([M().then(Q=>Q.data),H({start:g,count:w,dateStart:u==null?void 0:u.concat("T00:00"),dateEnd:p==null?void 0:p.concat("T00:00")}).then(Q=>Q.data)]);c(z.total),l(z.items),d(B)}finally{a(!1)}}n.useEffect(()=>{W()},[v]);function J(){v==0?W():S(0)}async function D(){try{a(!0);let g=await q();k.info(g.message),W()}finally{a(!1)}}if(t)return e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsx("div",{className:s.modal,children:e.jsx("div",{className:s.spinner})})]});const $=(j=Me.find(g=>g.id===(I==null?void 0:I.referralType)))==null?void 0:j.name;return e.jsx("div",{className:s.websiteContainer,children:e.jsxs("div",{className:s.website,children:[e.jsx(R,{styles:s}),e.jsxs("main",{children:[e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Кэшбек"}),I?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Вы получите бонус в ",I.cashbackPercent,"% ",$," с каждого обмена."]}),e.jsxs("p",{children:[e.jsx("b",{children:"Всего начислено:"}),"  ",((y=i==null?void 0:i.sum)==null?void 0:y.toFixed(2))||0," USDT"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Всего выплачено:"}),"  ",((F=i==null?void 0:i.payed)==null?void 0:F.toFixed(2))||0," USDT"]}),e.jsxs("p",{children:[e.jsx("b",{children:"Баланс:"}),"  ",(i==null?void 0:i.sum)-(i==null?void 0:i.payed)||0," USDT"]}),i!=null&&i.activePayout?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"Ваш запрос на выплату обрабатывается оператором."}),e.jsxs("p",{children:["Дата: ",i.activePayout.dateCreated]}),e.jsxs("p",{children:["Сумма: ",i.activePayout.amount]})]}):(i==null?void 0:i.sum)-(i==null?void 0:i.payed)>10?e.jsx("button",{className:s.save,style:{margin:"1em 0",maxHeight:"2.5rem"},onClick:D,children:"Вывести бонусы..."}):"Можно вывести бонусы, если баланс > 10 USDT"]}):e.jsx(ze,{text:"Для просмотра кэшбека войдите на сайт с логином и паролем"})]}),I&&e.jsxs("div",{className:s.dataBar,children:[e.jsx("h3",{children:"Мои заявки с кэшбеком"}),e.jsx(We,{title:"Фильтр",isVisible:x,setIsVisible:h,styles:s,child:e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1em"},children:[e.jsxs("label",{children:["Дата от: ",e.jsx("input",{type:"date",value:u,name:"dateStart",onChange:g=>f(g.target.value)})]}),e.jsxs("label",{children:["Дата до: ",e.jsx("input",{type:"date",value:p,name:"dateEnd",onChange:g=>N(g.target.value)})]})]}),e.jsx("button",{onClick:J,children:"Применить"})]})}),e.jsx(oe,{total:r,currentPage:v,rowsPerPage:w,onPageChange:S,styles:s}),e.jsx(Rt,{data:o}),e.jsx(oe,{total:r,currentPage:v,rowsPerPage:w,onPageChange:S,styles:s})]})]}),e.jsx(Y,{styles:s})]})})}const zt=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"}));export{Lt as C,Gt as I,Ot as M,Dt as O,Pt as P,Bt as R,Et as W,$t as a,kt as b,At as c,Ut as d,Mt as e,Wt as f,zt as g,s};
